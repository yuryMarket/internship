---
  - hosts: tag_env_test
    become: true
    vars:
      db_volume: mariadb
      wordpress: wordpress
    tasks:
      - name: Deploy MariaDB server
        docker_container:
          image: mariadb
          name: mariadb
          volumes:
            - "{{db_volume}}:/var/lib/mysql"
          env:
            MYSQL_ROOT_PASSWORD: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              35633264623862626639643233396336386133353234396666353163643062363039616633663532
              3037323365643232643263313734616538366532353365320a633633633737373565366538633436
              39396138393663623335386164333739616366393231613032646636613666353430623666373435
              3663343530633133370a366539353265306361386237366462313539383639303834623536386432
              3534

            MYSQL_PASSWORD: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              33646136643332626434333838373437393838613034636261376330336434666633396431383464
              3633323831373261396336333666336233663930313834310a653661373565306661356339333939
              64336336646531396237386439663130363938376235376436393136386336623830666238626537
              3337386632303134390a306665633837663165316135643066623031313366316262356535353063
              3739

            MYSQL_DATABASE: db
            MYSQL_USER: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              66666136316536313261646239313434363737653262633437396332643662353763663139336262
              6363353538376233633533393062616134353366373535360a666361643836383638623466633361
              66363835333735666436373362346637376632623237363866366633336565613137653866356435
              3865333562613931640a646336303934356630363632626339623736663962303631636462333465
              3431

      - name: Deploy WordPress
        docker_container:
          image: wordpress
          name: wordpress
          restart_policy: always
          ports:
            - "8080:80"
          links:
            - "{{db_volume}}:/var/lib/mysql"
          volumes:
            - "{{wordpress}}:/var/www/html"
          env:
            MYSQL_PASSWORD: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              33646136643332626434333838373437393838613034636261376330336434666633396431383464
              3633323831373261396336333666336233663930313834310a653661373565306661356339333939
              64336336646531396237386439663130363938376235376436393136386336623830666238626537
              3337386632303134390a306665633837663165316135643066623031313366316262356535353063
              3739

            MYSQL_DATABASE: db
            MYSQL_USER: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              66666136316536313261646239313434363737653262633437396332643662353763663139336262
              6363353538376233633533393062616134353366373535360a666361643836383638623466633361
              66363835333735666436373362346637376632623237363866366633336565613137653866356435
              3865333562613931640a646336303934356630363632626339623736663962303631636462333465
              3431

            MYSQL_HOST: mariadb
